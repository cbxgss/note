# 1.绪论

用图像来得到 物品，光源，相机的信息

## 1.1数字图像

-   **数字图像**: 由像素组成的二维矩阵
-   **像素**: 每个像素由两个属性: 位置和灰度
    -   **灰度**: 单色的0-255
        -   0: 纯黑
        -   128: 纯灰
        -   255: 白
-   彩色图像: 用红、绿、蓝三元组

## 1.2数字图像处理的概念

-   利用计算机系统所对数字图像进行各种目的的处理

## 1.3数字图像的处理

-   **对图像进行数字化表示**: 连续图像 $f(x, y)$ 数字化
    -   空间上: 图像抽样
    -   幅度上: 灰度量化
-   **数字图像用矩阵来表示**: 长、宽、RGB
-   数字图像处理的**三个层次**
    -   图像处理
        -   对图像加工，改善图像的视觉效果
        -   图像到图像的过程
    -   图像分析
        -   对图像中一些目标 提取、分割，得到目标的客观信息
        -   以观察者为中心研究客观世界
        -   图像到数据的过程
    -   图像理解
        -   研究图像中目标的性质和联系
        -   以客观之间为中心，认识客观世界

## 1.4起源

## 1.5应用实例

-   伽马射线成像

-   X射线成像


## 1.6数字图像处理系统

-   图像数字化设备: 相机等
-   图像处理计算机
-   图像输出设备

## 1.7图像处理的主要研究内容

-   **图像变换**
    -   傅里叶变换
    -   沃尔什变换
    -   离散余弦变换
    -   小波变换
-   **图像压缩编码**
-   **图像的增强和复原**
    -   **图像增强**: 不考虑图像降质的原因，突出图像中感兴趣的部分
    -   **图像复原**: 要求对图像降质的原因有所了解，根据图像降质过程建立“退化模型”，然后采用滤波的方法重建或恢复原来的图像
    -   主要方法: 直方图均衡化、灰度修正、平滑、几何校正、图像锐化、滤波增强
-   **图像分割**: 将图像中有意义的特征提取出来(物体的边缘、区域)
    -   主要方法: 图像边缘检测、灰度阈值分割、基于纹理分割、区域增长
-   **图像描述**
    -   用一组数量或符号来表征图像中被描述物体的某些特征
    -   主要方法: 二值图像的几何特征、简单描述子、形状数、傅立叶描述子，纹理描述
-   **图像识别**
-   **图像隐藏**

# 2数字图像处理基础

## 2.1图像的获取和感知

-   **人类的视觉感知系统**

-   **传感器类型**
    -   **单个传感器**
        -   一个圆柱体
        -   优点: 精度高，成本低
        -   缺点: 速度慢
    -   **带状传感器**
        -   可以变形
        -   优点: 可以获得物体截面图像，成本较低
        -   缺点: 速度慢
        -   可以和单个传感器结合
    -   **传感器阵列**
    
-   **简单的图像形成模型**
    -   一个图像可以被看作空间里点的集合
    
    -   $I = f(x,y,z,\lambda, t)$
        -   $I$: 图像强度
        -   $x,y,z$: 空间坐标
        -   $\lambda$: 波长(颜色)
        -   $t$: 时间
        
    -   $I=f(x,y)=i(x,y) \cdot r(x,y)$
        -   $i(x,y) \in (0, +\infty)$: 入射到观察场景的光源总量，取决于照射源
        -   $r(x,y) \in (0, 1)$: 场景中物体反射光的总量，取决于成像物体
        
    -   **本征图像分解**
    
        -   原图 $\rightarrow$ 反射图+ 本色图(可以渲染反射图)
    
        ![image-20211202143355937](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202143355937.png)

## 2.2图像的数字化

-   把连续的感知数据离散成数字数据

    -   **取样**: 连续图像 $\rightarrow$ 离散取样点(即 $N行 * M列$ 像素)


    -   **量化**: 灰度级分辨率 $L = 2^k$


## 2.3数字图像的描述

-   **像素之间距离的定义**

    ![image-20211202143805945](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202143805945.png)

    -   **欧式距离**
    -   **city-block**: x和y相加
    -   **checkboard**: 一圈圈

-   **像素之间邻域关系**

    -   D邻域: 像素 $p(x,y)$ 的D邻域
        -   $N_D(p) = (x+1,y+1), (x+1, y-1), (x-1, y-1), (x-1, y+1)$
    -   8邻域

## 2.4图像的简单处理

-   **插值**
    -   上采样: 少的像素点 $\rightarrow$ 多的像素点
    -   下采样: 多的像素点 $\rightarrow$ 少的像素点
-   **图像的放大与缩小**
    -   **最近邻**
        -   用原来像素的值来确定新像素的值
        -   不用计算，直接最近
    -   **双线性插值**: 利用距离来做一个权重
        -   eg: 四个点
            -   $A = src(i,j)$，$B = src(i+1,j)$
            -   $C = src(i,j+1)$，$D = src(i+1,j+1)$
        -   线性插值: $src(i + du, j) = A + (B - A) * du$
        -   双线性插值: $src(i+du, j+dv) = \\src(i + du, j) + (src(i + du, j + 1) - src(i + du, j) * du) =\\ (1-du)*(1-dv)*A + (1-dv)*du*B+(1-dv)*dv*C + dv*du*D$
            -   即距离周围四个点的加权

## 2.5彩色图像表示

-   **RGB彩色模型**

    ![image-20211202143935091](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202143935091.png)

-   **HSI彩色模型**: 圆锥

    ![image-20211202144318940](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202144318940.png)

    -   H: 色调: 一个切面
        -   0度: 红
        -   逆时针120度: 绿色
        -   240度: 蓝色
    -   S: 饱和度: r
    -   I: 亮度: h

-   **RGB和HSI的转换**

-   **CMYK色系**: 从白光过滤出三种光，即减色系统

    -   C: 青色，过滤掉红色
    -   M: 品红，过滤掉绿色
    -   Y: 黄色，过滤蓝色

-   **彩色图像的灰度化**

    -   **最大值法**
    -   **平均值法**
    -   **加权平均值法**: 对颜色加权

# 3.图像增强

## 3.1背景知识

-   **图像增强**: 找到某些信息并突出

-   **目的**

    -   改善视觉效果
    -   让机器更好地分析

-   **空间域增强**: 增强构成图像的像素
    $$
    g(x,y)=T[f(x,y)]
    $$

    -   $f(x,y)$: 输入图像
    -   $g(x,y)$: 输出图像
    -   $T$: 对 $f$ 的操作

## 3.2基本灰度变换

-   **灰度级变换函数** $s = T(r)$

    -   $s$: 输出灰度级
    -   $r$: 输入灰度级

-   **三种基本类型**

    -   **线性**
        
        -   图像反转: $s = L - 1 - r$
        
        -   分段线性变换
            -   对比拉伸: 把某段灰度值区间拉伸
            
                ![image-20211202145100069](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202145100069.png)
            
            -   灰度切割: 提高特定灰度范围的亮度
            
                ![image-20211202145110789](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202145110789.png)
            
            -   位图切割: 把数字图像分解为位平面，关注0-255数值中，8个bit的每一位
        
    -   **对数变换**: $s = c log(1+r)$
        
        -   让很暗的，或过曝的图像更清
        -   扩展暗像素
        
    -   **幂次变换**: 伽马矫正 $s = cr^{\gamma}$
        
        -   用 $\gamma$ 可以控制是 窄 $\rightarrow$ 宽 还是 宽 $\rightarrow$ 窄
        -   $\gamma$ 矫正: 许多电子信号需要矫正

## 3.3 直方图处理

-   **直方图**

    -   横坐标: 灰度值 $r_k \in [0, L-1]$
    -   纵坐标: $r_k$ 出现的次数 $h(r_k)$
    -   意义: **作用当直方图分布均匀时，图像最清晰**
    -   归一化直方图: 纵坐标为 $p_r(r_k) = \frac{n_k}{n}$

-   **直方图均衡化**

    -   目的: 找到一个 $s = T(r)$，将$p_r(r) \rightarrow p_s(s)$，即将原来图像的每个灰度值，都映射为一个新的灰度值

    -   $T(r)$ 要满足

        -   单增且单值
        -   任意 $r \in [0, 1]$，有 $T(r) \in [0, 1]$

    -   **步骤**

        -   统计 $p_r$
            $$
            p_r(r_k) = \frac{n_k}{n}
            $$

        -   其中一个重要的 $T(r)$
            $$
            s_k = T(r_k) = \int_0^{r_k} p_r(r_k) dr = \sum\limits_{j=0}^kp_r(r_j) = \sum\limits_{j=0}^k\frac{n_j}{n}
            $$

        -   取整扩展
            $$
            S(k) = int[(max(r_k)-min(r_k)) \cdot s_k + 0.5]
            $$

    -   eg

        ![image-20211202145732798](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202145732798.png)
        
        ![image-20211202145747427](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202145747427.png)
        
    -   问题

        -   只是近似的函数，结果不平坦
        -   “简并”现象: 可能一些灰度值会合并，一些灰度丢失

-   **直方图规定化**

    -   **目的**

        -   已知
            -   $p_r(r)$: 原图的灰度密度函数
            -   $p_z(z)$: 希望得到的灰度密度函数
        -   对均衡化的优化，找到一个灰度级变换函数 $T$，使得 $z_k = T(r_k), \; r \rightarrow z$

    -   **步骤**

        -   分别对 $p_r(r)$ 和 $p_z(z)$ 作直方图均衡化处理

            -   $s = T(r)$
            -   $v = G(z)$
            -   变换后的灰度 $s$ 和 $v$ 的密度函数是相同的均匀密度，由于 $s$ 和 $v$ 都是直方图均衡化的结果， 所以 $s = v$

        -   得到灰度值的映射
            $$
            r_k \mathop{\rightarrow}\limits^T s_j = v_k \mathop{\rightarrow}\limits^{G^{-1}} z_k
            $$

    -   eg

        ![image-20211202150009757](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202150009757.png)

        ![image-20211202150025458](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202150025458.png)

        ![image-20211202150048442](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211202150048442.png)

-   **局部直方图处理**

    -   ①定义一个方形或矩形的区域(邻域),该区域的中心位置在某个像素点
    -   ②用前面的方法对区域内的灰度进行映射
    -   ③把该区域的中心从一个像素移动至另一像素
    -   ④重复②③


## 3.4 空间滤波基础

作用: 图像的平滑，锐化

-   类似卷积

## 3.5 空间平滑滤波器

用于模糊处理和减少噪声

-   **平滑线性滤波器**
    -   取均值
    
    $$
    \frac{1}{9} \begin{bmatrix} 1&1&1\\ 1&1&1\\ 1&1&1\\ \end{bmatrix}
    $$
    
    -   加权平均
        $$
        \frac{1}{16} \begin{bmatrix} 1&2&1\\ 2&4&2\\ 1&2&1\\ \end{bmatrix}
        $$
    
-   **统计排序滤波器**
    
    -   先对区域内灰度进行排序，然后确定结果
    -   **中值滤波器**: 用中值
    

## 3.6 空间锐化滤波器

-   **锐化**
    -   目的: 突出图像中的细节或者增强被模糊了的细节
    -   可以用**空间微分**完成

### 拉普拉斯算子

-   **用差分定义微分**

    -   **一阶微分**
        $$
        \frac{\partial f}{\partial x} = f(x + 1) - f(x)
        $$

    -   **二阶微分**
        $$
        \frac{\partial^2 f}{\partial x^2} = f(x + 1) + f(x - 1) - 2f(x)
        $$

-   **拉普拉斯变换**
    $$
    \nabla^2 f = \frac{\partial^2 f}{\partial x^2} + \frac{\partial^2 f}{\partial y^2} = f(x+1,y) + f(x-1,y) + f(x,y+1) + f(x,y-1) - 4f(x,y)
    $$

    -   对应的滤波器
        $$
        \begin{bmatrix} 0&1&0\\ 1&-4&1\\ 0&1&0\\ \end{bmatrix}
        $$

    -   扩展的滤波器
        $$
        \begin{bmatrix} 1&1&1\\ 1&-8&1\\ 1&1&1\\ \end{bmatrix}
        $$

    -   作用

        -   强调**灰度变化的突变**，弱化变化慢的区域
        -   可以用于**提取**图像中的**边缘信息**

-   **用于锐化**
    $$
    g(x,y) = f(x,y) - \nabla^2 f(x,y)
    $$

    -   将原始图像和拉普拉斯图像叠加

    -   掩模
        $$
        \begin{bmatrix} 0&-1&0\\ -1&5&-1\\ 0&-1&0\\ \end{bmatrix}
        $$

    -   扩展的
        $$
        \begin{bmatrix} -1&-1&-1\\ -1&9&-1\\ -1&-1&-1\\ \end{bmatrix}
        $$


### 反锐化掩蔽与高频提升滤波处理

-   **反锐化掩蔽**: 将图像模糊形式从原始图像中去除

    -   基本算法
        $$
        g_{mask}(x, y) = f(x, y) + k [f(x, y) - \bar{f}(x, y)]
        $$

    -   $f(x, y)$: 原始图像

    -   $\bar{f}(x, y)$: 用人为方法模糊的图像，可以用简单局部平均得到
        $$
        \frac{1}{9}\begin{bmatrix} 1&1&1\\ 1&1&1\\ 1&1&1\\ \end{bmatrix}
        $$

    -   $f_s(x, y) = f(x, y) - \bar{f}(x, y)$: 低频成分损失

    -   取 $k = 9$，则 $g(x, y)$ 的掩模为
        $$
        w_1 = \begin{bmatrix} 0&0&0\\ 0&1&0\\ 0&0&0\\ \end{bmatrix} + 9(\begin{bmatrix} 0&0&0\\ 0&1&0\\ 0&0&0\\ \end{bmatrix} - \frac{1}{9}\begin{bmatrix} 1&1&1\\ 1&1&1\\ 1&1&1\\ \end{bmatrix}) = \begin{bmatrix} -1&-1&-1\\ -1&9&-1\\ -1&-1&-1\\ \end{bmatrix}
        $$

-   **高频提升滤波**
    $$
    \begin{split}
    f_{hb}(x, y) & = (A - 1)f(x,y) + f(x,y) - \bar{f}(x,y) \; A \ge 1\\
                 & = Af(x, y) - \bar{f}(x, y)
    \end{split}
    $$

### 梯度算子

-   **梯度**
    $$
    \nabla f(x,y)
    = \begin{bmatrix} G_x \\ G_y \end{bmatrix}
    = \begin{bmatrix} \frac{\partial f}{\partial x} \\ \frac{\partial f}{\partial y} \end{bmatrix}
    $$

    -   幅值: $mag(f) = \sqrt{G_x^2 + G_y^2}$

    -   角度: $\alpha(x, y) = \arctan(\frac{G_y}{G_x})$

    -   近似计算
        $$
        M_1 = \abs{G_x} + \abs{G_y} \\
        M_2 = G_x^2 + G_y^2
        $$

-   **$3 \times 3$ 邻域**
    $$
    \begin{bmatrix} z_1&z_2&z_3\\ z_4&z_5&z_6\\ z_7&z_8&z_9\\ \end{bmatrix}
    $$

-   **Sobel 梯度算子**
    $$
    g_x = \begin{bmatrix} -1&0&1\\ -2&0&2\\ -1&0&1\\ \end{bmatrix}, \; g_y = \begin{bmatrix} -1&-2&-1\\ 0&0&0\\ 1&2&1\\ \end{bmatrix}
    $$

    -   $g_x$: 右 - 左
    -   $g_y$: 下 - 上

    $$
    \begin{split}
    M_1(x,y) = & \abs{(z_3 + 2z_6 + z_9) - (z_1 + 2z_4 + z_7)} \\
             & + \abs{(z_7 + 2z_8 + z_9) - (z_1 + 2z_2 + z_3)}
    \end{split}
    $$

-   **Roberts 算子**
    $$
    g_x = \begin{bmatrix} 0&0&0\\ 0&-1&0\\ 0&0&1\\ \end{bmatrix}, \;
    g_y = \begin{bmatrix} 0&0&0\\ 0&0&-1\\ 0&1&0\\ \end{bmatrix}
    $$

    $$
    M_1 = \abs{G_x} + \abs{G_y} = \abs{z_9 - z_5} + \abs{z_8 - z_6}
    $$

-   **Prewitt 算子**
    $$
    g_x = \begin{bmatrix} -1&-1&-1\\ 0&0&0\\ 1&1&1\\ \end{bmatrix}, \;
    g_y = \begin{bmatrix} -1&0&1\\ -1&0&1\\ -1&0&1\\ \end{bmatrix}
    $$

### 边缘检测

-   边缘
    -   理想边缘: 突变
    -   实际边缘: 振荡渐变
-   导数
    -   一阶导数(**梯度算子**): 可以判断一个点是不是边缘点
        -   突出小缺陷
        -   去除背景
    -   二阶导数(**Laplace算子**): 可以用符号判断一个边缘像素是在亮边还是暗边
        -   增强灰度突变处的对比度

## 3.7 混合空间增强法

### **图像复原**

-   需要图像退化的先验知识

-   退化图像
    $$
    g(x, y) = f(x, y) * h(x, y) + \eta(x, y)
    $$

    -   $h(x,y)$: 退化函数
    -   $\eta (x,y)$: 噪声

### 噪声模型

概率密度函数: $PDF$

-   **高斯噪声**
    $$
    p(z) = \frac{1}{\sqrt{2\pi} \sigma }e^{-\frac{(z-\mu)^2}{2 \sigma^2}}
    $$

-   **瑞利分布噪声**
    $$
    p(z) = \begin{cases}
    \frac{2}{b}(z-2)d^{-\frac{(x-\mu)^2}{2\sigma^2}} & z \ge a\\
    0                                                & z < a
    \end{cases}
    $$

    -   $\mu = a + \sqrt{\pi b/4}$
    -   $\sigma^2 = b(4 - \pi)/4$

-   **伽马噪声**
    $$
    p(z) = \begin{cases}
    \frac{a^b z^{b-1}}{(b-1)!}e^{-az} & z \ge 0\\
    0                                 & z < 0
    \end{cases}
    $$

    -   $\mu = b/a$
    -   $\sigma^2 = b/a^2$

-   **指数分布噪声**

-   **均匀分布噪声**

-   **脉冲噪声(椒盐噪声)**

-   **周期噪声**

### 噪声的参数估计

# 4.频率域图像增强

## 4.1图像的傅里叶变换

-   **傅里叶变换的意义**

    -   时域 $\rightarrow$​ 频域: 将函数基于频率分成不同的成分
    
    ![image-20211204105414680](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211204105414680.png)
    
    -   高频分量: 噪声、边缘、跳跃部分
    -   低频分量: 背景区域和慢变部分
    
-   **一维傅里叶变换**

    -   连续函数 $f(x)$ 的傅里叶变换 $F(u)$
        $$
        F(u) = \int_{-\infty}^{\infty}f(x)e^{-i2\pi ux}dx = \sum\limits_{x=0}^{N-1}f(x)e^{-i2\pi ux/N}
        $$
    
        -   $x$: 时域的自变量
    
            -   $u$: 频域的自变量
    
    
    -   反变换
        $$
        f(x) = \int_{-\infty}^{\infty}F(u)e^{i2\pi ux}du = \frac{1}{N} \sum\limits_{x=0}^{N-1} F(u)e^{i2 \pi ux/N}
        $$
    
    
    -   eg
    
        ![image-20211204105905356](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211204105905356.png)
    
        ![image-20211204105916265](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211204105916265.png)
    
    -   **二维傅里叶变换**
    
        -   变换
            $$
            F(u, v) = \sum\limits_{x=0}^{M-1} \sum\limits_{y=0}^{N-1} f(x, y) e^{-i2 \pi (ux/M + vy/N)}
            $$
    
        -   反变换
            $$
            f(x, y) = \frac{1}{MN} \sum\limits_{x=0}^{M-1} \sum\limits_{y=0}^{N-1} F(u, v) e^{i2 \pi (ux/M + vy/N)}
            $$
    
        -   性质
    
            -   **平移性**: 平移原图的像素，不会影响变换结果
    
                ![image-20211204110301177](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211204110301177.png)
    
            -   **平移性特例**
    
                ![image-20211204110356680](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211204110356680.png)
    
            -   **二维傅里叶变换的周期性**
    
                ![image-20211204110518345](%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211204110518345.png)
    

## 4.2频率域滤波

-   **傅里叶变换图像与图像中的强度对应**

    -   暗点越多: 原始图像更柔和
    -   亮点越多: 图像越锐利

-   **步骤**

    -   乘以 $(-1)^{x+y}$ 来进行中心变化(平移性)

    -   计算 $DFT$
        $$
        f(x,y)(-1)^{x+y} \rightarrow F(u-M/2, v-N/2)
        $$

    -   **滤波函数处理**
        $$
        G(u, v) = H(u, v) \cdot F(u, v)
        $$

        -   $H(u, v)$: **滤波函数**

            -   **陷波滤波器**: 希望图像灰度均值为0
                $$
                H(M/2, N/2) = \begin{cases}
                0, & (u,v)=(M/2,N/2) \\
                1, & else
                \end{cases}
                $$
            
                -   因为 $F(0,0)$ 刚好是所有的灰度值相加，这里设置为了 $0$

            -   **低通滤波器**: 模糊化

                <img src="%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211204111547202.png" alt="image-20211204111547202" style="zoom: 80%;" />

                -   高斯滤波器函数
                    $$
                    H(u) = Ae^{-u^2/2\sigma^2} \\
                    h(x) = \sqrt{2\pi} \sigma A e^{-2\pi^2 \sigma^2 x^2}
                    $$
            
                    -   $\sigma$: 高斯曲线标准差
            
                -   理想低通滤波器
                    $$
                    H(u, v) = \begin{cases}
                    1, & D(u,v) \le D_0 \\
                    0, & D(u,v) > D_0
                    \end{cases}
                    $$
            
                    -   $D(u,v)$: 距离原点的距离
                        $$
                        D(u,v) = \sqrt{(u - M/2)^2 + (v - N/2)^2}
                        $$
            
                    -   振铃现象
            
                -   巴特沃斯低通滤波器
                    $$
                    H(u,v) = \frac{1}{1+(\frac{D(u,v)}{D_0})^{2n}}
                    $$
            
            -   **高通滤波器**: 锐化
            
                <img src="%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.assets/image-20211204111602088.png" alt="image-20211204111602088" style="zoom:80%;" />
            
                -   高斯高通滤波器
                    $$
                    H(u) = Ae^{-u^2/2\sigma_1^2} - Ae^{-u^2/2\sigma_2^2}
                    $$
            

    -   计算 $IDFT$

    -   得到 $IDFT$ 的实部

    -   乘以 $(-1)^{x+y}$

-   **空间域滤波与频率域滤波之间的关系**

    -   **矩阵卷积**
        $$
        f(x,y) * h(x,y) = \frac{1}{MN} \sum\limits_{m=0}^{M-1} \sum\limits_{n=0}^{N-1} f(m,n)h(x-m, y-n)
        $$
    
        -   大写: 频率域
        -   小写: 空间域
    
    -   **卷积定理**
    
    $$
    f(x,y) * h(x, y) \Leftrightarrow F(u, v)H(u, v) \\
    f(x,y) h(x,y) \Leftrightarrow F(u, v)*H(u,v)
    $$

## 4.3频率域平滑滤波器

低通滤波器: $H_{lp}(u,v)$

## 4.4频率域锐化滤波器

1-低通滤波器: $H_{hp}(u,v) = 1 - H_{lp}(u,v)$

# 5.视觉感知与边缘提取

## 5.1视觉感知

-   组
-   距离越近越像
-   连续性原理
-   对称结构
-   过去经验

## 5.2边缘提取

### 一阶微分算子

-   Roberts算子
-   Prewitt算子
-   Sobel算子
-   梯度
    -   梯度方向: 边缘方向
    -   梯度大小: 边界可能性
        -   阈值

### 二阶微分算子

-   Laplacian算子
    $$
    \frac{1}{1+a} \begin{bmatrix} a&1-a&a\\ 1-a&-4&1-a\\ a&1-a&a\\ \end{bmatrix}
    $$

### Noise解决

-   **LoG (Laplacian of Gaussian)**: 拉普拉斯 L + 高斯滤波器 G (L \* G)

-   **DoG**: LoG的近似，两个高斯的差 (G1 - G2)

-   **Canny算子**

    -   高斯平滑
        $$
        G * I
        $$

    -   求梯度

    -   非极大值抑制

    -   Hysteresis thresholding

### EdgeFlow

-   构造ETF: 边缘切线方向场
    
    -   $t(x)$: pixel 像素 x 的 ETF
        $$
        t(x) \bot \nabla I(x)
        $$
    
    -   求法
        $$
        t'(x) = \frac{1}{k} \int \int_{\Omega_{\mu}} \Phi(x,y)  w_s(x,y) w_m(x,y) w_d(x,y) t(y) dy
        $$
    
        -   $w_s(x,y)$: 邻域内
            $$
            w_s(x,y) = \begin{cases}
            1, & \abs{x - y} < \mu \\
            0, & 其他
            \end{cases}
            $$
    
        -   $w_m(x,y)$: 梯度越近越大
            $$
            w_m(x,y) = \frac{\abs{g(y) - g(x) + 1}}{2}
            $$
    
        -   $\Phi(x,y)$: 方向
            $$
            \Phi(x,y)= \begin{cases}
            1,  & t(x) \cdot t(y) > 0 \\
            -1, & 其他
            \end{cases}
            $$
    
        -   $w_d(x,y)$: 大小
            $$
            w_m(x,y) = \abs{t(x) \cdot t(y)}
            $$
    
-   线提取

    -   沿着切线取邻域带(通过梯度方向)，做DoG，得到点的边界可能性
    -   沿着切线方向，用高斯滤波器做平滑

-   阈值化

# 颜色

