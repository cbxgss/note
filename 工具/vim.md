# 末行命令

```shell
:e		#打开内置的文件浏览器
:n		#新建文件
:w		#另存为
```

# 分屏

```shell
:sp	[文件名]	#横向增加分屏
:vsp [文件名]	#纵向
```

切换：

1. 先按`ctrl + w`
2. 然后：
   - w：下一个窗口
   - r：互换
   - c：关闭当前窗口（不关闭最后一个）
   - q：退出当前窗口（if是最后一个，关闭vi）
   - o：关闭其他窗口

# 编辑

## 重复次数

一个数字

## 撤销和重复命令

```shell
u			#撤销上次命令
ctrl + r	#恢复撤销的命令
.			#重复命令
```

## 移动光标

- 单词末尾

  ```sh
  w
  ```

- 按括号移动

  ```shell
  %
  ```

- 按行移动

  ```shell
  gg	#文件顶部
  G	#文件末尾
  数字gg or 数字G or :数字	#移动到数字对应行数
  ```

- 按屏幕移动

  ```shell
  ctrl + b		#向上翻页
  ctrl + f		#向下翻页
  H				#屏幕顶部
  M				#屏幕中间
  L				#屏幕底部
  ```

- 按段落移动

  ```shell
  {	#上一段
  }
  ```

- 按标记移动

  ```shell
  mx	#创建标记，x是字母
  'x	#回到标记
  ```

## 选择文本

```shell
v		#可视模式	从光标位置，移动光标
V		#可视行模式	选中光标的完整行，移动光标
ctrl+v	#可视块模式	矩形选择左上和右下，移动光标
```

## 编辑操作

- 剪切

  ```shell
  x	#删除当前的字符 或 选中的文本
  d+移动
  dd	#删除行
  D	#从光标删除至行尾
  ```

- 复制粘贴

  ```shell
  y+移动	#复制
  yy		#复制一行
  p		#粘贴
  右键		#粘贴系统剪切板的东西
  ```

- 替换

  ```shell
  rx		#用x替换当前字符
  ```

  进入替换模式：	`	R`

- 缩进

  ```shell
  >>	#本行或选中文本，向右
  <<	#左
  ```

- **编辑模式**

  | 命令 |     功能     |
  | :--: | :----------: |
  |  i   |     插入     |
  |  I   |    在行首    |
  |  a   | 在当前字符后 |
  |  A   |    在行尾    |
  |  o   |    后一行    |
  |  O   |    前一行    |

## 查找

```shell
fx		#找到x，光标移动到v
/str	#同上，但是可以是str
```

```shell
n	#上一个
N	#下一个
```

- 单词快速匹配

  ```shell
  *	#向后查找当前光标所在单词
  #	#向后
  ```

## 查找并替换

- 全局替换

  ```shell
  :%s/旧文本/新文本/g
  ```

- 可视区域替换

  ```shell
  选中区域
  :s/旧/新/g
  ```

- 确认替换

  ```shell
  ....../gc
  ```

  - y
  - n
  - a：替换all
  - q：退出替换
  - I：最后一个，并把光标移动到行首
  - ^E：向下滚屏
  - ^Y：向上

# 保存和退出

- `:w`：保存
- `:q`：退出
- `:q!`：强制退出
- `:wq`：保存并退出
- `:x`：保存并退出

# ctags

- 生成ctags

  ```shell
  ctags + 文件
  ctags -R
  ```

- 查看跳转记录：`:tags`

- 跳到函数定义处：ctrl + ]

- 跳转记录往回走：ctrl + t

- 跳转记录往前走：tag